<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/WEB-INF/templates/template.xhtml">

	<!-- content -->
	<ui:define name="body">
	
	<h:form id="searchValuePapers">
	 <p:panel header="Aktiensuche" style="margin-bottom:10px;">
			<h:panelGrid columns="4" cellpadding="5">
				<p:outputLabel for="name" value="Aktienname: " style="padding: 10px;"/>
				<p:inputText id="name" value="#{valuePaperScreenerBean.valuePaperName}" />
				
				<p:outputLabel for="type" value="Aktientyp: " style="padding: 10px;"/>
				<p:selectOneMenu id="type" value="#{valuePaperScreenerBean.valuePaperType}" style="width:190px">
					<f:selectItem itemLabel="Beliebig" itemValue="#{null}" />
					<f:selectItems value="#{valuePaperScreenerBean.valuePaperTypes}" />
				</p:selectOneMenu>
				
				<p:outputLabel for="isin" value="ISIN: " style="padding: 10px;"/>
				<p:inputText id="isin"
					value="#{valuePaperScreenerBean.isin}" >
					<!--  <f:validateRegex pattern="^([a-zA-Z]|\?|\*){2}([a-zA-Z0-9]|\?|\*)*" />-->
				</p:inputText>
		
				<p:outputLabel for="country" value="Land: " style="padding: 10px;"/>
				<p:inputText id="country" value="#{valuePaperScreenerBean.country}" />

				<p:outputLabel for="currency" value="Währungscode: " style="padding: 10px;"/>
				<p:inputText id="currency"
					value="#{valuePaperScreenerBean.currencyCode}" >
					 <f:validateRegex pattern="^[a-zA-Z]{3}$" />
				</p:inputText>			
			</h:panelGrid>
		</p:panel>
		
				<center>
					<p:commandButton value="Reset" type="reset" />
					<p:commandButton value="Suche"
						action="#{valuePaperScreenerBean.search()}" update="searchValuePapers"
						ajax="true" />
					</center>
				<br/>
				
				<p:message for="isin" style="color:red" />
				<p> </p>
				<p:message for="currency" style="color:red" />

		<p:separator />
		
		<p:dataTable var="valuePaper" value="#{valuePaperScreenerBean.searchedValuePapers}">
				    <p:column headerText="Name" sortBy="#{valuePaper.name}">
				        <h:outputText value="#{valuePaper.name}" />
				    </p:column>
				    <p:column headerText="Währung" sortBy="#{valuePaper.currency.currencyCode}">
				        <h:outputText value="#{valuePaper.currency.currencyCode} (#{valuePaper.currency.symbol})" rendered="#{valuePaper.type == 'STOCK'}"/>
				    </p:column>
				    <p:column headerText="Land" sortBy="#{valuePaper.country}">
				        <h:outputText value="#{valuePaper.country}"  rendered="#{valuePaper.type == 'STOCK'}"/>
				    </p:column>
				    <p:column headerText="ISIN" sortBy="#{valuePaper.code}">
				        <h:outputText value="#{valuePaper.code}" />
				    </p:column>
				    <p:column headerText="Typ" sortBy="#{valuePaper.type}">
				        <h:outputText value="#{valuePaper.type}" />
				    </p:column>
				    <p:column >
				    	<h:button value="Details" outcome="/valuepaper/valuepaperview">
							<!--  includeViewParams="true" -->
							<f:param name="valuePaperIsin" value="#{valuePaper.isin}" />
						</h:button> 
				    </p:column>
				</p:dataTable>
			</h:form>
	</ui:define>
	<!-- content -->

</ui:composition>
