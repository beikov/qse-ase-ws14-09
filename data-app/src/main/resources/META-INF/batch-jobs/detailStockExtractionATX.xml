<?xml version="1.0" encoding="UTF-8"?>
<!-- This job extracts all bonds from ATX stocks -->
<job id="detailStockExtractionATX" xmlns="http://xmlns.jcp.org/xml/ns/javaee"
	version="1.0">
	<step id="stockDetailLinkExtraction" next="stockDetailExtraction">
		<batchlet ref="StockDetailLinkReaderBatchlet">
			<properties>
				<property name="boerseUrl"
					value="http://kurse.wienerborse.at/teledata_php/prices/dispatch_list.php" />
				<property name="finanzenNetUrl" value="http://www.finanzen.at/index/liste" />
				<property name="indexName" value="ATX" />
			</properties>
		</batchlet>
		<listeners>
		    <listener ref="StepBoundaryLogger" />
		</listeners>
	</step>
	<step id="stockDetailExtraction">
		<chunk item-count="10">
			<reader ref="StockDetailReader" />
			<processor ref="SimpleItemProcessor" />
			<writer ref="StockDetailWriter" />
			
			<retryable-exception-classes>
				<include class="java.net.SocketTimeoutException" />
			</retryable-exception-classes>
			<skippable-exception-classes>
				<include class="java.net.SocketTimeoutException" />
			</skippable-exception-classes>
		</chunk>
		<listeners>
		    <listener ref="StepBoundaryLogger" />
			<listener ref="TransitioningStepListener" />
			<listener ref="DefaultSkipListener" />
			<listener ref="DefaultRetryListener" />
		</listeners>
	</step>
	<listeners>
	    <listener ref="JobBoundaryLogger" />
	    <listener ref="SuccessorJobStarter">
	        <properties>
	        	<property name="successorJobIds" value="#{jobParameters['successorJobIds']}" />
	        </properties>
	    </listener>
	</listeners>
</job>